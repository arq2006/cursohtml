<!doctype html>
<html>
    <head>
        <title>Curso Javascript Completo 2018</title>
        <meta charset="utf-8">
        
        
    </head>
    <body>
        <h1>Curso Javascript Completo 2018</h1> 


        <script>

            (function(){
                window.addEventListener('scroll', destacaMenu);
                var $menu = document.querySelector('.nav');
                var $links = $menu.querySelectorAll('li a');

                function destacaMenu(){
                    var positions = [];
                    for(var i = 0; i < $links.length; i++){
                        positions[i] = pegaYPosicaoScroll($links[i])
                    }
                    console.log(positions);

                    var linkAtual = pegaUltimoLinkVisivel(positions);
                    $menu.querySelector('.actived').classList.remove('actived');
                    linkAtual.classList.add('actived');
                }

                function pegaYPosicaoScroll(link){
                    var alvo = document.querySelector(link.getAttribute('href'));
                    var positionYViewport = alvo.getBoundingClientRect().top;
                    return positionYViewport;
                }

                function pegaUltimoLinkVisivel(positions){
                    var qtd = positions.length;
                    while(qtd){
                        qtd--;
                        if(positions[qtd - 1] < 0){
                            return $links[qtd]
                        }
                    }
                    return $links[0];
                }
                
            })()
        </script>
        
    </body>
    </html>